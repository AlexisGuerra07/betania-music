<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Betania Music - Gestor Musical</title>
    
    <!-- Meta tags -->
    <meta name="description" content="Sistema de gesti√≥n musical para alabanza cristiana con transposici√≥n autom√°tica">
    <meta name="keywords" content="m√∫sica, alabanza, acordes, canciones, cristiano">
    <meta name="author" content="Betania Music">
    
    <!-- PWA Meta tags -->
    <meta name="theme-color" content="#0d9488">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Betania Music">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- CSS - SOLO ESTE ARCHIVO -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">üéµ</div>
            <h2>Betania Music</h2>
            <div class="loading-spinner"></div>
            <p>Cargando sistema musical...</p>
        </div>
    </div>

    <!-- App Principal -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-container">
                <div class="logo-section">
                    <div class="logo">üéµ</div>
                    <div class="logo-text">
                        <h1>Betania Music</h1>
                        <p>Sistema Musical</p>
                    </div>
                </div>
                
                <!-- Navegaci√≥n -->
                <nav class="nav">
                    <button id="homeBtn" class="nav-btn active" data-view="home">
                        üè† <span>Inicio</span>
                    </button>
                    <button id="addBtn" class="nav-btn" data-view="add">
                        ‚ûï <span>A√±adir</span>
                    </button>
                </nav>
            </div>
        </header>

        <!-- Vista: Inicio (Lista de Canciones) -->
        <main id="homeView" class="view active">
            <div class="container">
                <!-- Header de secci√≥n -->
                <div class="section-header">
                    <h2>üéº Mis Canciones</h2>
                    <button id="addNewSongBtn" class="btn btn-primary">
                        ‚ûï Nueva Canci√≥n
                    </button>
                </div>

                <!-- B√∫squeda -->
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Buscar canciones..." class="search-input">
                        <div class="search-icon">üîç</div>
                    </div>
                </div>

                <!-- Lista de canciones -->
                <div id="songsGrid" class="songs-grid">
                    <!-- Canciones se cargan aqu√≠ -->
                </div>

                <!-- Estado vac√≠o -->
                <div id="emptyState" class="empty-state hidden">
                    <div class="empty-icon">üéµ</div>
                    <h3>No hay canciones</h3>
                    <p>A√±ade tu primera canci√≥n para comenzar</p>
                    <button class="btn btn-primary" onclick="showView('add')">
                        ‚ûï A√±adir Primera Canci√≥n
                    </button>
                </div>
            </div>
        </main>

        <!-- Vista: A√±adir/Editar Canci√≥n -->
        <main id="addView" class="view">
            <div class="container">
                <!-- Header de secci√≥n -->
                <div class="section-header">
                    <h2 id="addTitle">‚ûï A√±adir Nueva Canci√≥n</h2>
                    <div class="header-actions">
                        <button id="reAnalyzeBtn" class="btn btn-warning hidden">
                            üîÑ Re-analizar
                        </button>
                        <button id="pasteBtn" class="btn btn-secondary">
                            üìã Pegar Canci√≥n
                        </button>
                    </div>
                </div>

                <!-- Formulario -->
                <div class="form-card">
                    <!-- Informaci√≥n b√°sica -->
                    <div class="form-section">
                        <h3>üìù Informaci√≥n de la Canci√≥n</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="songTitle">T√≠tulo *</label>
                                <input type="text" id="songTitle" placeholder="T√≠tulo de la canci√≥n" required>
                            </div>
                            <div class="form-group">
                                <label for="songArtist">Artista</label>
                                <input type="text" id="songArtist" placeholder="Nombre del artista">
                            </div>
                            <div class="form-group">
                                <label for="songKey">Tonalidad Original</label>
                                <select id="songKey">
                                    <option value="C">C (Do)</option>
                                    <option value="C#">C# (Do#)</option>
                                    <option value="D">D (Re)</option>
                                    <option value="D#">D# (Re#)</option>
                                    <option value="E">E (Mi)</option>
                                    <option value="F">F (Fa)</option>
                                    <option value="F#">F# (Fa#)</option>
                                    <option value="G">G (Sol)</option>
                                    <option value="G#">G# (Sol#)</option>
                                    <option value="A">A (La)</option>
                                    <option value="A#">A# (La#)</option>
                                    <option value="B">B (Si)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Secciones -->
                    <div class="form-section">
                        <div class="section-header-small">
                            <h3>üéµ Secciones de la Canci√≥n</h3>
                            <button id="addSectionBtn" class="btn btn-outline">
                                ‚ûï A√±adir Secci√≥n
                            </button>
                        </div>
                        <div id="sectionsContainer" class="sections-container">
                            <!-- Secciones se cargan aqu√≠ -->
                        </div>
                        <div id="noSectionsMsg" class="no-sections">
                            <p>No hay secciones a√±adidas. Usa el bot√≥n "üìã Pegar Canci√≥n" para detectar autom√°ticamente las partes.</p>
                        </div>
                    </div>

                    <!-- Botones de acci√≥n -->
                    <div class="form-actions">
                        <button id="cancelBtn" class="btn btn-ghost">
                            ‚ùå Cancelar
                        </button>
                        <button id="saveBtn" class="btn btn-primary">
                            üíæ Guardar Canci√≥n
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Vista: Ver Canci√≥n -->
        <main id="songView" class="view">
            <div class="container">
                <!-- Header de canci√≥n -->
                <div class="song-header">
                    <button id="backBtn" class="btn btn-ghost">
                        ‚Üê Volver
                    </button>
                    <div class="song-info">
                        <h1 id="currentSongTitle">T√≠tulo</h1>
                        <p id="currentSongArtist">Artista</p>
                    </div>
                    <div class="song-actions">
                        <button id="editCurrentBtn" class="btn btn-secondary">
                            ‚úèÔ∏è Editar
                        </button>
                    </div>
                </div>

                <!-- Controles de tonalidad -->
                <div class="key-controls">
                    <div class="key-info">
                        <span class="key-label">Tonalidad:</span>
                        <span id="currentKey" class="current-key">C</span>
                    </div>
                    <div class="key-buttons">
                        <button id="keyDown" class="key-btn" title="Bajar medio tono">‚ô≠</button>
                        <button id="keyReset" class="key-btn reset" title="Tonalidad original">‚ü≤</button>
                        <button id="keyUp" class="key-btn" title="Subir medio tono">‚ôØ</button>
                    </div>
                </div>

                <!-- Contenido de la canci√≥n -->
                <div id="songContent" class="song-content">
                    <!-- Secciones se cargan aqu√≠ -->
                </div>
            </div>
        </main>
    </div>

    <!-- Modal: Pegar Canci√≥n -->
    <div id="pasteModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h3>üìã Pegar Canci√≥n Completa</h3>
                <button id="closePasteModal" class="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    Pega aqu√≠ la canci√≥n completa con acordes y letras. El sistema detectar√° autom√°ticamente las partes como Estrofa, Coro, Puente, etc.
                </p>
                <div class="paste-container">
                    <textarea id="pasteText" placeholder="Ejemplo:

Estrofa 1:
C           Am
El nos ama con amor eterno
F           G
Nada nos separar√°

Coro:
F           C
Aleluya, cantamos tu amor
G           Am
Por siempre te adoramos" class="paste-textarea"></textarea>
                </div>
                <div class="modal-tip">
                    üí° <strong>Tip:</strong> Puedes usar etiquetas como "Estrofa:", "Coro:", "Puente:" o dejar que el sistema detecte autom√°ticamente.
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelPaste" class="btn btn-ghost">Cancelar</button>
                <button id="processPaste" class="btn btn-primary">üîç Procesar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Re-analizar -->
    <div id="reAnalyzeModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h3>üîÑ Re-analizar Canci√≥n</h3>
                <button id="closeReAnalyzeModal" class="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    Modifica el texto de la canci√≥n y vuelve a analizar para detectar las partes correctamente.
                </p>
                <div class="paste-container">
                    <textarea id="reAnalyzeText" placeholder="Modifica el texto aqu√≠..." class="paste-textarea"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelReAnalyze" class="btn btn-ghost">Cancelar</button>
                <button id="processReAnalyze" class="btn btn-primary">üîç Re-analizar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Confirmar Eliminaci√≥n -->
    <div id="deleteModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-container small">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Confirmar Eliminaci√≥n</h3>
                <button id="closeDeleteModal" class="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    ¬øEst√°s seguro de que quieres eliminar esta canci√≥n? Esta acci√≥n no se puede deshacer.
                </p>
                <div class="delete-song-info">
                    <strong id="deleteSongTitle">T√≠tulo</strong>
                    <span id="deleteSongArtist">Artista</span>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelDelete" class="btn btn-ghost">Cancelar</button>
                <button id="confirmDelete" class="btn btn-danger">üóëÔ∏è Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Toast de notificaciones -->
    <div id="toast" class="toast hidden">
        <div class="toast-content">
            <span id="toastMessage">Mensaje</span>
        </div>
    </div>

    <!-- JavaScript - SOLO ESTE ARCHIVO -->
    <script src="script.js"></script>
</body>
</html>
